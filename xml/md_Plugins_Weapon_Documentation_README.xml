<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.16">
  <compounddef id="md_Plugins_Weapon_Documentation_README" kind="page">
    <compoundname>md_Plugins_Weapon_Documentation_README</compoundname>
    <title>Weapon Plugin Reference</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<sect1 id="md_Plugins_Weapon_Documentation_README_1autotoc_md252">
<title>Environment Variables</title>
<para>None.</para>
</sect1>
<sect1 id="md_Plugins_Weapon_Documentation_README_1autotoc_md253">
<title>Description</title>
<para>Functions exposing additional weapon properties.</para>
<para>Allows modifying which feats count as which for the weapon feats. Can be used to add feats like WEAPON_FOCUS_* to custom weapons. All you have to do is:</para>
<para><orderedlist>
<listitem><para>Create a custom feat and add it to your hak.</para>
</listitem><listitem><para>Create the new base item ID for your new weapon or use one that already exists.</para>
</listitem><listitem><para>On the OnModuleLoad event script of your module define the association between the weapon and the feat using the functions defined in the <emphasis>nwnx_weapon</emphasis> script</para>
</listitem></orderedlist>
</para>
<para>For example, if you added the FEAT_WEAPON_FOCUS_KATAR on line 3000 of your <emphasis>feat.2da</emphasis> and you added the new BASE_ITEM_KATAR on line 310 of your <emphasis>baseitems.2da</emphasis>, in the OnModuleLoad script just add (don&apos;t forget to include the <emphasis>nwnx_weapon</emphasis> script) :</para>
<para><programlisting filename=".C"><codeline><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>FEAT_WEAPON_FOCUS_KATAR<sp/>=<sp/>3000;<sp/></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>BASE_ITEM_KATAR<sp/>=<sp/>310;</highlight></codeline>
<codeline><highlight class="normal"><ref refid="group__weapon_1gaa74f691d599e48f697719ea8731f11be" kindref="member">NWNX_Weapon_SetWeaponFocusFeat</ref>(BASE_ITEM_KATAR,<sp/>FEAT_WEAPON_FOCUS_KATAR);</highlight></codeline>
</programlisting> </para>
</sect1>
<sect1 id="md_Plugins_Weapon_Documentation_README_1autotoc_md254">
<title>Available functions</title>
<para><table rows="18" cols="2"><row>
<entry thead="yes"><para>Script function  </para>
</entry><entry thead="yes"><para>Description   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetWeaponFocusFeat  </para>
</entry><entry thead="no"><para>Associate a weapon focus feat to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetWeaponFinesseSize  </para>
</entry><entry thead="no"><para>Define the required creature size for a weapon in order to be finessable   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetWeaponUnarmed  </para>
</entry><entry thead="no"><para>Set the weapon to be considered unarmed regarding the finesse feat   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetWeaponImprovedCriticalFeat  </para>
</entry><entry thead="no"><para>Associate a weapon improved critical feat to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetWeaponSpecializationFeat  </para>
</entry><entry thead="no"><para>Associate a weapon specialization feat to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetEpicWeaponFocusFeat  </para>
</entry><entry thead="no"><para>Associate an epic weapon focus feat to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetEpicWeaponSpecializationFeat  </para>
</entry><entry thead="no"><para>Associate an epic weapon specialization feat to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetEpicWeaponOverwhelmingCriticalFeat  </para>
</entry><entry thead="no"><para>Associate an epic weapon overwhelming critical feat to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetEpicWeaponDevastatingCriticalFeat  </para>
</entry><entry thead="no"><para>Associate an epic weapon devastating critical feat to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetWeaponOfChoiceFeat  </para>
</entry><entry thead="no"><para>Associate a weapon of choice feat to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetGreaterWeaponFocusFeat  </para>
</entry><entry thead="no"><para>Associate a greater weapon focus feat (default: +1 attack bonus) to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetGreaterWeaponSpecializationFeat  </para>
</entry><entry thead="no"><para>Associate a greater weapon specialization feat (default: +2 damage bonus) to a weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetWeaponIsMonkWeapon  </para>
</entry><entry thead="no"><para>Set the weapon to be considered a monk weapon   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetOption  </para>
</entry><entry thead="no"><para>Set different options of the plugin   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_SetDevastatingCriticalEventScript  </para>
</entry><entry thead="no"><para>Set a script to be called when a devastating critical event occurs   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_GetDevastatingCriticalEventData  </para>
</entry><entry thead="no"><para>Must be called inside the devastating critical event script. Returns a structure with the data of the devastating critical event (weapon, target and damage)   </para>
</entry></row>
<row>
<entry thead="no"><para>NWNX_Weapon_BypassDevastatingCritical  </para>
</entry><entry thead="no"><para>Must be called inside the devastating critical event script. If called, no devastating critical will occur.   </para>
</entry></row>
</table>
</para>
<para>The NWNX_Weapon_SetOption function can be used to define the attack and damage bonusses of the Greater Weapon Focus Feats and Greater Weapon Specialization Feats respectively.</para>
</sect1>
<sect1 id="md_Plugins_Weapon_Documentation_README_1autotoc_md255">
<title>Example for Critical Event Script</title>
<para>This script just print some info to the log and then bypass the devastating critcial 50% of the time. You have to set your script with NWNX_Weapon_SetDevastatingCriticalEventScript(&quot;name_of_your_script&quot;) (in the OnModuleLoad script for example)</para>
<para><programlisting filename=".cpp"><codeline><highlight class="preprocessor">#include<sp/>&quot;nwnx_weapon&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>main()</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data" kindref="compound">NWNX_Weapon_DevastatingCriticalEvent_Data</ref><sp/>data<sp/>=<sp/><ref refid="group__weapon_1ga197c4fe02b6ad0b905bae126f262d8b7" kindref="member">NWNX_Weapon_GetDevastatingCriticalEventData</ref>();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">object</highlight><highlight class="normal"><sp/>oAttacker<sp/>=<sp/>OBJECT_SELF;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">object</highlight><highlight class="normal"><sp/><ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1a0ab39f5f5fdd4c3c995f8b84a5193c6a" kindref="member">oWeapon</ref><sp/>=<sp/>data.<ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1a0ab39f5f5fdd4c3c995f8b84a5193c6a" kindref="member">oWeapon</ref>;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">object</highlight><highlight class="normal"><sp/><ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1a05c644a763be5a9e7614b16137de7c23" kindref="member">oTarget</ref><sp/>=<sp/>data.<ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1a05c644a763be5a9e7614b16137de7c23" kindref="member">oTarget</ref>;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1ad61f6ae678343f3781deacdb33efb27d" kindref="member">nDamage</ref><sp/>=<sp/>data.<ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1ad61f6ae678343f3781deacdb33efb27d" kindref="member">nDamage</ref>;</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>WriteTimestampedLogEntry(</highlight><highlight class="stringliteral">&quot;Devastating<sp/>Critical<sp/>Event:<sp/>Attaker:<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>GetName(oAttacker)<sp/>+</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;,<sp/>Weapon:<sp/>&quot;</highlight><highlight class="normal">+<sp/>GetName(<ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1a0ab39f5f5fdd4c3c995f8b84a5193c6a" kindref="member">oWeapon</ref>)<sp/>+</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;,<sp/>Target:<sp/>&quot;</highlight><highlight class="normal">+<sp/>GetName(<ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1a05c644a763be5a9e7614b16137de7c23" kindref="member">oTarget</ref>)<sp/>+</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;,<sp/>Damage:<sp/>&quot;</highlight><highlight class="normal"><sp/>+<sp/>IntToString(<ref refid="structNWNX__Weapon__DevastatingCriticalEvent__Data_1ad61f6ae678343f3781deacdb33efb27d" kindref="member">nDamage</ref>));</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(d100()&gt;50)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__weapon_1ga475625ae5cff73b4fe1361ea515cbd73" kindref="member">NWNX_Weapon_BypassDevastatingCritical</ref>();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>WriteTimestampedLogEntry(</highlight><highlight class="stringliteral">&quot;Devastating<sp/>Critical<sp/>Bypassed&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
</programlisting> </para>
</sect1>
    </detaileddescription>
  </compounddef>
</doxygen>
