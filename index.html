<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.16"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>NWNX:EE: Main Page</title>
                <link href="logo-transparent.png" rel="shortcut icon" type="image/x-icon">
                <link href="logo-transparent.png" rel="apple-touch-icon-precomposed">
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><img width="80" height="74" alt="Logo" src="logo-transparent.png"/></td>
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">NWNX:EE
								&#160;<span id="projectnumber">8186</span>
							</div>
						</td>
						<td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">NWNX:EE Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md252">What is NWNX:EE?</a></li>
<li class="level1"><a href="#autotoc_md253">What versions of the server are supported?</a></li>
<li class="level1"><a href="#autotoc_md254">What platforms are supported?</a></li>
<li class="level1"><a href="#autotoc_md255">How do I use it?</a></li>
<li class="level1"><a href="#autotoc_md256">Integrating NWNX:EE into your module</a></li>
<li class="level1"><a href="#autotoc_md257">Running the server (native)</a></li>
<li class="level1"><a href="#autotoc_md258">Running the server (Docker)</a></li>
<li class="level1"><a href="#autotoc_md259">Compiling NWNX:EE (native)</a></li>
<li class="level1"><a href="#autotoc_md260">Compiling NWNX:EE (docker)</a></li>
<li class="level1"><a href="#autotoc_md261">Contributing code</a></li>
<li class="level1"><a href="#autotoc_md262">Who makes NWNX:EE?</a></li>
<li class="level1"><a href="#autotoc_md263">You&#39;re awesome, let me pay you</a></li>
<li class="level1"><a href="#autotoc_md264">Contact</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md252"></a>
What is NWNX:EE?</h1>
<p>NWNX:EE stands for Neverwinter Nights Extender: Enhanced Edition. In a nutshell, NWNX:EE is a framework that developers can use to modify existing hardcoded rules or inject brand new functionality into Neverwinter Nights: Enhanced edition.</p>
<p>Using NWNX:EE, developers can make plugins to do anything they want, including but not limited to:</p>
<ol type="1">
<li>Create brand new scripting commands as if they were part of the base game's scripting API.</li>
<li>Integrate the game's scripting language with external tools, processes, and databases, such as MySQL.</li>
<li>Modify existing mechanics that are conventionally difficult or impossible to change, such as the core combat rules or the path finding engine.</li>
</ol>
<p>NWNX:EE is not just for plugin developers. Module creators can use plugins created by the NWNX:EE contributors to expand the scripting and systems functionality of their modules.</p>
<h1><a class="anchor" id="autotoc_md253"></a>
What versions of the server are supported?</h1>
<p>The most recent build of NWN:EE that is supported can be discovered at the top of this file. Please note that we do NOT support any server binaries other than the one in the dedicated server package. We support neither the binary released through the Beamdog client nor the one released through the Steam client. We release an update for each new version of the dedicated server package, which can be found here: <a href="https://forums.beamdog.com/discussion/67157/server-download-packages-and-docker-support/p1">https://forums.beamdog.com/discussion/67157/server-download-packages-and-docker-support/p1</a></p>
<h1><a class="anchor" id="autotoc_md254"></a>
What platforms are supported?</h1>
<p>Only Linux is currently supported. It is possible to run NWNX:EE on Windows using Docker to emulate a Linux server environment. Refer to the sections below to find out how. Many discussions have taken place regarding work on a native Windows port of NWNX:EE. It has been tackled several times in the past, but none of those attempts have seen fruition - complications have arisen in the course of the work. We know how we would do it, and estimate the time required for the task to be between 2 and 4 weeks of full-time work, but nobody with the skillset necessary to take on the project has the time or interest at the moment to do so. Therefore, users should not expect a native Windows port from a member of the team in the near future. (contributions welcome!)</p>
<h1><a class="anchor" id="autotoc_md255"></a>
How do I use it?</h1>
<p>First of all, you need to get the NWNX binaries. If you want to compile the binaries yourself, refer to the compiling section below. Otherwise, you can download the binaries by clicking on the <a href="https://github.com/nwnxee/unified/releases">Releases</a> tab at the top of the GitHub repository page. Keep in mind these are generally only updated whenever a new NWN patch is released.</p>
<h1><a class="anchor" id="autotoc_md256"></a>
Integrating NWNX:EE into your module</h1>
<p>The built binaries (when built using the build script or downloaded as artifacts) will contain a folder in which all of the script files associated with NWNX:EE live. Simply import these into your module and call the functions as you would any other scripting function. Some may not compile with the default compiler - it is safe to delete these scripts if you do not need to use the associated plugins.</p>
<h1><a class="anchor" id="autotoc_md257"></a>
Running the server (native)</h1>
<p>Given the binaries, follow these steps:</p>
<ol type="1">
<li>Copy the binaries next to the server executable. This will usually be in /bin/linux-x86.</li>
<li>Create a startup script that looks like this: <pre class="fragment">#!/bin/sh
export LD_PRELOAD="./NWNX_Core.so"
./nwserver-linux
</pre></li>
<li>You can optionally configure plugins using environment variables. At the moment you will need to search the plugin documentation to find the correct environment variables: each plugin, located in the Plugins/ folder in the source tree, has a README.md which contains some information about the plugin. Please note that not all environment variables will be documented so you may need to dig through the source code.</li>
<li>You can skip a particular plugin by adding a line that looks like this before starting nwserver-linux: <pre class="fragment">export NWNX_JVM_SKIP=true
</pre></li>
<li>You can set the log levels like this, which governs the verbosity of log output, with 1 being the least verbose and 7 being the most verbose. <pre class="fragment">export NWNX_CORE_LOG_LEVEL=7 # Default log level for core and all plugins
export NWNX_JVM_LOG_LEVEL=7 # Log level for JVM, overrides default
</pre></li>
</ol>
<p>Optionally, you can use Docker to run the server with pre-built NWNX binaries. Refer to the section below</p>
<h1><a class="anchor" id="autotoc_md258"></a>
Running the server (Docker)</h1>
<p><code>nwnxee/unified</code> supports the following <a href="https://cloud.docker.com/repository/docker/nwnxee/unified/tags">tags</a>:</p>
<ul>
<li><code>[commit-hash]</code> (7 characters and 40)</li>
<li><code>[commit-hash]-full</code></li>
<li><code>latest</code></li>
<li><code>latest-full</code></li>
<li><code>[tag]</code></li>
<li><code>[tag]-full</code></li>
</ul>
<p>Due to Docker's local image cache we recommend using the <code>[commit-hash]</code> tag to explicitly state which nwnx build to run. In comparison, the <code>latest</code> tag will usually hit the image cache and return an outdated build, as you have to run <code>docker pull nwnxee/unified</code> to update the <code>latest</code> image in your cache. Using the <code>[commit-hash]</code> tag removes the need to manually run docker pull on your machines, and enables you to roll back in a simple and sensible manner.</p>
<p>The <code>-full</code> versions include all the heavier run dependencies, and is only necessary if you use the plugins mono or jvm.</p>
<p>Note, the image named <code>nwnxee/nwserver</code> exists for legacy reasons but is no longer actively maintained.</p>
<p>Run the image exactly the same as you would run the <code>beamdog/nwserver</code> image. For any questions related to running nwserver, please refer to the nwserver <a href="https://hub.docker.com/r/beamdog/nwserver/">README</a>.</p>
<p>nwnxee plugins are configured using environment variables passed to <code>docker run</code>. With the exception of ServerLogRedirector, all plugins are skipped by default. Plugins are activated by passing <code>n</code> to the corresponding environment variable for a given plugin in order to not skip it, e.g. <code>-e NWNX_ADMINISTRATION_SKIP=n</code>.</p>
<p>Some plugins require additional configurations, like for instance the database plugin. To find plugin specific configurations please refer to the README of the given plugin located in its directory.</p>
<p>It is advised to configure the container with docker-compose. Please refer to these resources for documentation and examples</p>
<ul>
<li><a href="https://docs.docker.com/compose/">https://docs.docker.com/compose/</a></li>
<li>Example compose file: <a href="https://github.com/Urothis/nwnxee-template/blob/master/docker-compose.yml">nwnxee-template</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md259"></a>
Compiling NWNX:EE (native)</h1>
<p>Please note that you need a modern C++ compiler to build NWNX:EE. The code is confirmed to build on GCC 6.4 + or Clang 4.0 +. It may be possible to build on an older compiler.</p>
<p>Each plugin may have one or more dependencies that must be satisfied in order to build that plugin. Refer to each individual plugin's CMakeLists.txt to determine their dependencies.</p>
<p>To build the typical way:</p>
<ol type="1">
<li>Execute ./Scripts/buildnwnx.sh</li>
</ol>
<p>Or, if you want to compile manually:</p>
<ol type="1">
<li>Execute CC=gcc -m32 CXX=g++ -m32 mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make</li>
</ol>
<h1><a class="anchor" id="autotoc_md260"></a>
Compiling NWNX:EE (docker)</h1>
<p>To build on Linux, MacOS, or Docker-Toolbox:</p>
<ol type="1">
<li>Execute ./Scripts/rundockerbuild.sh</li>
<li>The script will pull the NWNX Linux Docker builder image</li>
<li>The Container will execute the ./scripts/buildnwnx.sh script</li>
<li>To perform a clean build pass -c eg './scripts/rundockerbuild.sh -c'</li>
<li>To perform multi-threaded compilation pass -j.</li>
</ol>
<p>To build on Windows:</p>
<ol type="1">
<li>Execute ./Scripts/rundockerbuild.ps1</li>
<li>The script will pull the NWNX Linux Docker builder image</li>
<li>The Container will execute the ./scripts/buildnwnx.sh script</li>
<li>To perform a clean build pass -FORCECLEAN eg './scripts/rundockerbuild.ps1 -FORCECLEAN'</li>
</ol>
<h1><a class="anchor" id="autotoc_md261"></a>
Contributing code</h1>
<p>All contribution are welcome. The only requirement is that the code you contribute adheres to the following restrictions:</p>
<ol type="1">
<li>Prefix members variables with m_.</li>
<li>Use lowerCamelCase for variables.</li>
<li>Use UpperCamelCase for functions.</li>
<li>Use UpperCamelCase for classes.</li>
<li>Use ALL_CAPS for constants and macros.</li>
<li>Braces always start on a new line and always end on a new line.</li>
<li>Spaces, not tabs.</li>
<li>Avoid manual memory management. Use unique_ptr always. This helps transparent hotloading later!</li>
</ol>
<p>Most importantly, be sure never to manually write memory addresses or hooks yourself. These must ALWAYS go through the core systems to make sure that plugins can play nicely together.</p>
<h1><a class="anchor" id="autotoc_md262"></a>
Who makes NWNX:EE?</h1>
<p>The project is an open source project created and maintained by community members for free in their spare time.</p>
<h1><a class="anchor" id="autotoc_md263"></a>
You're awesome, let me pay you</h1>
<p>Thanks, but you should donate your dolla dolla bills to a good cause instead. If you really want to spend money to support NWN, consider donating to Neverwinter Vault to cover their sever hosting costs.</p>
<h1><a class="anchor" id="autotoc_md264"></a>
Contact</h1>
<p>The team can be contacted on Discord using the invite at the following URL: <a href="https://discord.gg/hxTt8Fr">https://discord.gg/hxTt8Fr</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="footer">
					Generated on Mon Oct 14 2019 03:53:30 for NWNX:EE by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16.
					<a href="dark/">Dark version</a>
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>
