<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NWNX-Unified: Changelog</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NWNX-Unified
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('changelog.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Changelog </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md0">Unreleased</a><ul><li class="level2"><a href="#autotoc_md1">Added</a><ul><ul><li class="level4"><a href="#autotoc_md2">New Plugins</a></li>
<li class="level4"><a href="#autotoc_md3">New NWScript Functions</a></li>
</ul>
</ul>
</li>
<li class="level2"><a href="#autotoc_md4">Changed</a></li>
<li class="level2"><a href="#autotoc_md5">Deprecated</a></li>
<li class="level2"><a href="#autotoc_md6">Removed</a></li>
<li class="level2"><a href="#autotoc_md7">Fixed</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>All notable changes to this project will be documented in this file.</p>
<p>The format is based on <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a>.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
Unreleased</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8186-2...HEAD">https://github.com/nwnxee/unified/compare/build8186-2...HEAD</a></p>
<p>NOTICE: The ABI has changed, please make sure to update your <a class="el" href="nwnx_8nss.html">nwnx.nss</a> and recompile all your scripts.</p>
<h2><a class="anchor" id="autotoc_md1"></a>
Added</h2>
<ul>
<li>Added support to skip building certain plugins by setting an environment variable, for example: <code>NWNX_SKIP_PLUGINS="JVM;Lua;Mono;Ruby;SpellChecker"</code></li>
<li>Added support to build out of tree plugins with the following environment variable: <code>NWNX_ADDITIONAL_PLUGINS=/path/to/Plugin1;/path/to/Plugin2</code></li>
<li>Added string localization support. Only Russian/Cyrillic supported at the moment. Use environment variable <code>NWNX_CORE_LOCALE=ru</code></li>
<li>Core: Allow changing default plugin state from 'load all' to 'skip all' with the following environment variable: <code>NWNX_CORE_SKIP_ALL=y</code>. Use <code>NWNX_PLUGIN_SKIP=n</code> to enable specific plugins in this case.</li>
<li>Core: Allow passing engine structures to nwnx (Effect/Itemproperty)</li>
<li>Core: Added the environment variable <code>NWNX_CORE_SHUTDOWN_SCRIPT=scriptname</code> which lets you set a nwscript that runs when the server shuts down</li>
<li>Core: Added Util functions to call various script events</li>
<li>Core: NWNX will now log the resref of areas it's trying to load when running log level <code>7</code></li>
<li>Events: New events: SkillEvents, MapEvents, EffectEvents, QuickChatEvents, InventoryEvents, BarterEvents, TrapEvents, TimingBarEvents, LevelEvents, WebHookEvents</li>
<li>Events: The following events are now skippable: FeatEvents, ItemEvents, HealersKitEvents, CombatModeEvents, PartyEvents, SkillEvents, MapEvents, PolymorphEvents, DMActionEvents, ClientConnectEvents, SpellEvents, QuickChatEvents, InventoryEvents, BarterEvents (START only), TrapEvents, StickyPlayerNameReservedEvent, StealthEvent</li>
<li>Events: You can now get the current event name with a nwscript function</li>
<li>Events: Added On{Listen/Spot}Detection events to StealthEvents</li>
<li>Events: Added On{Un}Polymorph events as PolymorphEvents</li>
<li>Events: Added Event Data for SpawnObject, GiveItem, GiveAlignment, Heal, Kill, ToggleInvulnerabilty, ForceRest, Limbo, ToggleAI, ToggleImmortal, Goto, Possess, PossessFullPower, ToggleLock, DisableTrap, JumpToPoint, JumpTargetToPoint, JumpAllPlayersToPoint, ChangeDifficulty, ViewInventory, SpawnTrapOnObject events in DMActionEvents</li>
<li>Events: Added OnClientConnect events that fire before the player sees the server vault.</li>
<li>Events: Added ItemInventory{Open/Close}, ItemInventory{Add/Remove}Item, ScrollLearn, DestroyObject and DecrementStackSize events to ItemEvents</li>
<li>Events: Added {Set|Clear}MemorizedSpellSlot events to SpellEvents</li>
<li>Events: Added AmmoReload events that are used when the engine is looking for ammunition to reload</li>
<li>Events: Added Run{Un}Equip events to ItemEvents</li>
<li>Events: Added Barter Start/End events</li>
<li>Events: Added AIAction{Disarm|Examine|Flag|Recover|Set}Trap events</li>
<li>Events: Added Timing Bar events</li>
<li>Events: Added Sticky Player Name Reserved event allowing builders to use another method instead of knownservernames.2da to validate player names and cd keys</li>
<li>Events: Added Level{Up|UpAutomatic|Down} events to LevelEvents</li>
<li>Events: Added WebHook Success/Failure events with rate limit feedback</li>
<li>Events: Added UseLoreOnItem and PayToIdentifyItem events</li>
<li>Events: Added {Add|Remove}Gold events to InventoryEvents</li>
<li>Events: Added PVP Attitude Change event</li>
<li>Events: Added SplitItem event to ItemEvents</li>
<li>Events: Added WalkToWaypoint, AttackObject and ForceMoveToObject events to InputEvents</li>
<li>Events: Added Surface Material Change events</li>
<li>Profiler: Support profiler perf scopes via nwscript</li>
<li>SQL: Added support for SQLite</li>
<li>Tweaks: DisableQuickSave</li>
<li>Tweaks: HideDMsOnCharList</li>
<li>Tweaks: DisableMonkAbilitiesWhenPolymorphed</li>
<li>Tweaks: StringToIntBaseToAuto</li>
<li>Tweaks: DeadCreatureFiresOnAreaExit</li>
<li>Tweaks: PreserveActionsOnDMPossess</li>
<li>Tweaks: FixGreaterSanctuaryBug</li>
<li>Weapon: Feat and Base Item names were added to LOG_INFO feedback</li>
<li>WebHook: Added support for richer Slack-compatible messages</li>
<li>Util: Added the environment variable <code>NWNX_UTIL_PRE_MODULE_START_SCRIPT=scriptname</code> which lets you set a nwscript that runs before the OnModuleLoad event </li>
</ul>
<h4><a class="anchor" id="autotoc_md2"></a>
New Plugins</h4>
<p>The following plugins were added:</p><ul>
<li><b>Appearance</b>: Allows the appearance and some other things of creatures to be overridden per player</li>
<li><b>Area</b>: Adds functions exposing additional area properties</li>
<li><b>CombatModes</b>: Allows subscribing to Combat Mode toggle events. The Events plugin is needed to subscribe to the CombatMode events</li>
<li><b>Effect</b>: Provides various utility functions to manipulate builtin effect types</li>
<li><b>Experimental</b>: Adds experimental functionality that's not really useful for the general user. The following environmental variable needs to be true for the plugin to load: <code>NWNX_CORE_LOAD_EXPERIMENTAL_PLUGIN=y</code></li>
<li><b>ELC</b>: A customisable replacement for ValidateCharacter: ELC &amp; ILR</li>
<li><b>Encounter</b>: Adds functions exposing additional encounter properties</li>
<li><b>Feedback</b>: Allows combatlog, feedback and 'quest journal updated' messages to be hidden globally or per player</li>
<li><b>ItemProperty</b>: Provides various utility functions to manipulate builtin itemproperty types</li>
<li><b>MaxLevel</b>: Extends support for levels up to 60</li>
<li><b>Race</b>: Provides the ability to specify a variety of inate modifiers for new or existing races or subraces via script or 2da</li>
<li><b>Regex</b>: Adds functions to search and replace strings using regular expressions.</li>
<li><b>Rename</b>: Adds functions to facilitate renaming, overriding and customization of player names</li>
<li><b>Reveal</b>: Adds functions to allow the selective revealing of a stealthed character to another character or their party.</li>
<li><b>SkillRanks</b>: Adds functions to create feats and perform actions that manipulate the calculations of skill ranks</li>
<li><b>Visibility</b>: Allows the visibility of objects to be overridden globally or per player </li>
</ul>
<h4><a class="anchor" id="autotoc_md3"></a>
New NWScript Functions</h4>
<ul>
<li>Administration: GetPlayOption()</li>
<li>Administration: SetPlayOption()</li>
<li>Administration: DeleteTURD()</li>
<li>Appearance: {Get|Set}Override()</li>
<li>Area: GetNumberOfPlayersInArea()</li>
<li>Area: GetLastEntered()</li>
<li>Area: GetLastLeft()</li>
<li>Area: GetPVPSetting()</li>
<li>Area: SetPVPSetting()</li>
<li>Area: GetAreaSpotModifier()</li>
<li>Area: SetAreaSpotModifier()</li>
<li>Area: GetAreaListenModifier()</li>
<li>Area: SetAreaListenModifier()</li>
<li>Area: GetNoRestingAllowed()</li>
<li>Area: SetNoRestingAllowed()</li>
<li>Area: GetWindPower()</li>
<li>Area: SetWindPower()</li>
<li>Area: GetWeatherChance()</li>
<li>Area: SetWeatherChance()</li>
<li>Area: GetFogClipDistance()</li>
<li>Area: SetFogClipDistance()</li>
<li>Area: GetShadowOpacity()</li>
<li>Area: SetShadowOpacity()</li>
<li>Area: GetDayNightCycle()</li>
<li>Area: SetDayNightCycle()</li>
<li>Area: {Get|Set}SunMoonColors()</li>
<li>Area: CreateTransition()</li>
<li>Area: {Get|Set}TileAnimationLoop()</li>
<li>Chat: GetChatHearingDistance()</li>
<li>Chat: SetChatHearingDistance()</li>
<li>Creature: GetAttackBonus()</li>
<li>Creature: GetHighestLevelOfFeat()</li>
<li>Creature: GetFeatRemainingUses()</li>
<li>Creature: GetFeatTotalUses()</li>
<li>Creature: SetFeatRemainingUses()</li>
<li>Creature: GetTotalEffectBonus()</li>
<li>Creature: SetOriginalName()</li>
<li>Creature: GetOriginalName()</li>
<li>Creature: SetSpellResistance()</li>
<li>Creature: GetPrePolymorphAbilityScore()</li>
<li>Creature: {Get|Set}MovementRateFactor()</li>
<li>Creature: Set{AnimalCompanion|Familiar}CreatureType()</li>
<li>Creature: Set{AnimalCompanion|Familiar}Name()</li>
<li>Damage: SetAttackEventScript()</li>
<li>Damage: GetAttackEventData()</li>
<li>Damage: SetAttackEventData()</li>
<li>Damage: DealDamage()</li>
<li>Effect: PackEffect()</li>
<li>Effect: UnpackEffect()</li>
<li>Effect: SetEffectExpiredScript()</li>
<li>Effect: GetEffectExpiredData()</li>
<li>Effect: GetEffectExpiredCreator()</li>
<li>Encounter: GetNumberOfCreaturesInEncounterList()</li>
<li>Encounter: GetEncounterCreatureByIndex()</li>
<li>Encounter: SetEncounterCreatureByIndex()</li>
<li>Encounter: GetFactionId()</li>
<li>Encounter: SetFactionId()</li>
<li>Encounter: GetPlayerTriggeredOnly()</li>
<li>Encounter: SetPlayerTriggeredOnly()</li>
<li>Encounter: GetResetTime()</li>
<li>Encounter: SetResetTime()</li>
<li>ELC: SetELCScript()</li>
<li>ELC: EnableCustomELCCheck()</li>
<li>ELC: SkipValidationFailure()</li>
<li>ELC: GetValidationFailureType()</li>
<li>ELC: GetValidationFailureSubType()</li>
<li>ELC: GetValidationFailureMessageStrRef()</li>
<li>ELC: SetValidationFailureMessageStrRef()</li>
<li>ELC: GetValidationFailureItem();</li>
<li>ELC: GetValidationFailureLevel();</li>
<li>ELC: GetValidationFailureSkillID();</li>
<li>ELC: GetValidationFailureFeatID();</li>
<li>ELC: GetValidationFailureSpellID();</li>
<li>Events: GetCurrentEvent()</li>
<li>Events: ToggleDispatchListMode()</li>
<li>Events: AddObjectToDispatchList()</li>
<li>Events: RemoveObjectFromDispatchList()</li>
<li>Feedback: Get{Feedback|CombatLog|JournalUpdated}MessageHidden()</li>
<li>Feedback: Set{Feedback|CombatLog|JournalUpdated}MessageHidden()</li>
<li>Feedback: Set{Feedback|CombatLog}MessageMode()</li>
<li>Item: GetBaseArmorClass()</li>
<li>Item: GetMinEquipLevel()</li>
<li>ItemProperty: PackIP()</li>
<li>ItemProperty: UnpackIP()</li>
<li>Object: GetHasVisualEffect()</li>
<li>Object: CheckFit()</li>
<li>Object: GetDamageImmunity()</li>
<li>Object: AddToArea()</li>
<li>Object: GetPlaceableIsStatic()</li>
<li>Object: SetPlaceableIsStatic()</li>
<li>Object: {Get|Set}AutoRemoveKey()</li>
<li>Object: {Get|Set}TriggerGeometry()</li>
<li>Object: {Add|Remove}IconEffect()</li>
<li>Player: ShowVisualEffect()</li>
<li>Player: ForcePlaceableInventoryWindow()</li>
<li>Player: MusicBackgroundChangeDay()</li>
<li>Player: MusicBackgroundChangeNight()</li>
<li>Player: MusicBackgroundStart()</li>
<li>Player: MusicBackgroundStop()</li>
<li>Player: MusicBattleChange()</li>
<li>Player: MusicBattleStart()</li>
<li>Player: MusicBattleStop()</li>
<li>Player: PlaySound()</li>
<li>Player: SetPlaceableUsable()</li>
<li>Player: SetRestDuration()</li>
<li>Player: ApplyInstantVisualEffectToObject()</li>
<li>Player: UpdateCharacterSheet()</li>
<li>Player: OpenInventory()</li>
<li>Player: GetAreaExplorationState()</li>
<li>Player: SetAreaExplorationState()</li>
<li>Player: SetRestAnimation()</li>
<li>Player: SetObjectVisualTransformOverride()</li>
<li>Player: ApplyLoopingVisualEffectToObject()</li>
<li>Player: SetPlaceableNameOverride()</li>
<li>Player: GetQuestCompleted()</li>
<li>Player: SetPersistentLocation()</li>
<li>Player: UpdateItemName()</li>
<li>Race: SetRacialModifier()</li>
<li>Race: GetParentRace()</li>
<li>Regex: Search()</li>
<li>Regex: Replace()</li>
<li>Rename: SetPCNameOverride()</li>
<li>Rename: GetPCNameOverride()</li>
<li>Rename: ClearPCNameOverride()</li>
<li>Reveal: RevealTo()</li>
<li>Reveal: SetRevealToParty()</li>
<li>SkillRanks: GetSkillFeat()</li>
<li>SkillRanks: GetSkillFeatCountForSkill()</li>
<li>SkillRanks: GetSkillFeatForSkillByIndex()</li>
<li>SkillRanks: SetSkillFeat()</li>
<li>SkillRanks: SetSkillFeatFocusModifier()</li>
<li>SkillRanks: GetBlindnessPenalty()</li>
<li>SkillRanks: SetBlindnessPenalty()</li>
<li>SkillRanks: GetAreaModifier()</li>
<li>SkillRanks: SetAreaModifier()</li>
<li>Util: GenerateUUID()</li>
<li>Util: GetCustomToken()</li>
<li>Util: GetEnvironmentVariable()</li>
<li>Util: EffectToItemProperty()</li>
<li>Util: ItemPropertyToEffect()</li>
<li>Util: StripColors()</li>
<li>Util: IsValidResRef()</li>
<li>Util: GetMinutesPerHour()</li>
<li>Util: SetMinutesPerHour()</li>
<li>Util: EncodeStringForURL()</li>
<li>Util: Get2DARowCount()</li>
<li>Util: Get{First|Next}ResRef()</li>
<li>Util: GetServerTicksPerSecond()</li>
<li>Util: GetLastCreatedObject()</li>
<li>Visibility: GetVisibilityOverride()</li>
<li>Visibility: SetVisibilityOverride()</li>
<li>Weapon: SetWeaponIsMonkWeapon()</li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Changed</h2>
<ul>
<li>Core: The nwnx.txt logfile will now be written to the UserDirectory</li>
<li>Chat: LOG_DEBUG suppresses player to player tell specifics</li>
<li>Item: SetWeight now recomputes the possessor's encumbrance</li>
<li>Docker: Set default log level to 6</li>
<li>Docker: Skip all plugins except ServerLogRedirector by default</li>
<li>Redis: Lots of stuff, be sure to update the redis nwscripts!</li>
<li>Events: Changed <code>NUM_LEVELS</code> to <code>AMOUNT</code> for DMActionEvent GiveLevel</li>
<li>Player: StartGuiTimingBar() now accepts a type for pre-defined text</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Deprecated</h2>
<ul>
<li>Player: {Get/Set}VisibilityOverride() are deprecated, please use the new Visibility plugin!</li>
<li>Object: {Get/Set}Portrait() are deprecated, please use the native {Get/Set}PortraitResRef() functions instead!</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
Removed</h2>
<ul>
<li>The following plugins were removed: Names, BehaviourTree</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Fixed</h2>
<ul>
<li>Administration: Fixed a nullptr crash in Get{DM/Player}Password()</li>
<li>Chat: Fix recursive message skipping</li>
<li>Object: GetLocalVariable and GetLocalVariableCount now work with Area and Module object</li>
<li>Events: DMActionEvents now return valid TARGET event data</li>
<li>Core: Serialization now stores locals and effects for all objects, instead of only items </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="footer">
					Generated on Sun Oct 6 2019 03:09:11 for NWNX-Unified by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16.
					<a href="../">Light version</a>
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>
