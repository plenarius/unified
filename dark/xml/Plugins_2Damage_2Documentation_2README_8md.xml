<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.16">
  <compounddef id="Plugins_2Damage_2Documentation_2README_8md" kind="file" language="Markdown">
    <compoundname>README.md</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline><highlight class="normal">#<sp/>Damage<sp/>Plugin<sp/>Reference</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Ported<sp/>form<sp/>nwnx2<sp/>plugin<sp/>from<sp/>Baaleos.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Environment<sp/>Variables</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">None.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Description</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">This<sp/>plugin<sp/>allows<sp/>to<sp/>run<sp/>a<sp/>script<sp/>just<sp/>before<sp/>a<sp/>damage<sp/>is<sp/>applied<sp/>to<sp/>a<sp/>creature,<sp/>and<sp/>allows<sp/>to<sp/>modify<sp/>the<sp/>amount<sp/>and<sp/>type<sp/>of<sp/>the<sp/>damage.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">For<sp/>this<sp/>plugin<sp/>to<sp/>work<sp/>you<sp/>have<sp/>to<sp/>create<sp/>a<sp/>script<sp/>and<sp/>associate<sp/>it<sp/>to<sp/>the<sp/>&quot;OnApplyDamage&quot;<sp/>event<sp/>(see<sp/>the<sp/>example<sp/>below)<sp/>this<sp/>should<sp/>be<sp/>done<sp/>on<sp/>the<sp/>OnModuleLoad<sp/>event<sp/>of<sp/>your<sp/>module.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Note<sp/>that<sp/>the<sp/>immunities<sp/>and<sp/>damage<sp/>reduction<sp/>of<sp/>the<sp/>creature<sp/>have<sp/>been<sp/>already<sp/>taken<sp/>into<sp/>account<sp/>when<sp/>your<sp/>script<sp/>is<sp/>called.</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">##<sp/>Example</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">On<sp/>Module<sp/>Load<sp/>event<sp/>example:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```C</highlight></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;nwnx_damage&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">void<sp/>main()</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>NWNX_Damage_SetDamageEventScript(&quot;_on_damage&quot;);<sp/>//<sp/>This<sp/>is<sp/>the<sp/>script<sp/>that<sp/>will<sp/>be<sp/>called</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">&quot;_on_damage&quot;<sp/>script<sp/>example:</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```C</highlight></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;nwnx_damage&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">void<sp/>main()</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>struct<sp/>NWNX_Damage_DamageEventData<sp/>data;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Get<sp/>all<sp/>the<sp/>data<sp/>of<sp/>the<sp/>damage<sp/>event</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>NWNX_Damage_GetDamageEventData();</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>object<sp/>oDamager<sp/>=<sp/>data.oDamager;<sp/>//<sp/>The<sp/>damager</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>object<sp/>oTarget<sp/>=<sp/>OBJECT_SELF;<sp/><sp/><sp/><sp/>//<sp/>The<sp/>creature<sp/>receiving<sp/>the<sp/>damage</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Let<sp/>send<sp/>the<sp/>damage<sp/>amounts<sp/>and<sp/>types<sp/>to<sp/>the<sp/>Damager</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iBludgeoning:<sp/>&quot;<sp/>+<sp/>IntToString(data.iBludgeoning));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iPierce:<sp/>&quot;<sp/>+<sp/>IntToString(data.iPierce));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iSlash:<sp/>&quot;<sp/>+<sp/>IntToString(data.iSlash));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iMagical:<sp/>&quot;<sp/>+<sp/>IntToString(data.iMagical));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iAcid:<sp/>&quot;<sp/>+<sp/>IntToString(data.iAcid));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iCold:<sp/>&quot;<sp/>+<sp/>IntToString(data.iCold));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iDivine:<sp/>&quot;<sp/>+<sp/>IntToString(data.iDivine));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iElectrical:<sp/>&quot;<sp/>+<sp/>IntToString(data.iElectrical));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iFire:<sp/>&quot;<sp/>+<sp/>IntToString(data.iFire));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iNegative:<sp/>&quot;<sp/>+<sp/>IntToString(data.iNegative));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iPositive:<sp/>&quot;<sp/>+<sp/>IntToString(data.iPositive));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iSonic:<sp/>&quot;<sp/>+<sp/>IntToString(data.iSonic));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>SendMessageToPC(oDamager,<sp/>&quot;iBase:<sp/>&quot;<sp/>+<sp/>IntToString(data.iBase));</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Let<sp/>say<sp/>I<sp/>want<sp/>all<sp/>creatures<sp/>that<sp/>have<sp/>certain<sp/>local<sp/>int<sp/>to<sp/>be<sp/>inmune<sp/>to<sp/>fire</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>and<sp/>I<sp/>want<sp/>to<sp/>see<sp/>on<sp/>the<sp/>log<sp/>that<sp/>the<sp/>creature<sp/>received<sp/>0<sp/>damage<sp/>form<sp/>fire</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if(GetLocalInt(oTarget,&quot;I_M_FIRE_ELEMENTAL&quot;))</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data.iFire<sp/>=<sp/>0;<sp/>//</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Let<sp/>say<sp/>I<sp/>want<sp/>all<sp/>creatures<sp/>that<sp/>have<sp/>certain<sp/>local<sp/>int<sp/>to<sp/>be<sp/>inmune<sp/>to<sp/>cold</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>this<sp/>time<sp/>I<sp/>don&apos;t<sp/>want<sp/>to<sp/>see<sp/>anything<sp/>on<sp/>the<sp/>log<sp/>about<sp/>ICE<sp/>damage</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>if(GetLocalInt(oTarget,&quot;I_M_ICE_ELEMENTAL&quot;))</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data.iCold<sp/>=<sp/>-1;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>So:</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/><sp/>-<sp/>Set<sp/>the<sp/>numbers<sp/>to<sp/>-1<sp/>to<sp/>hide<sp/>them<sp/>from<sp/>the<sp/>combat<sp/>log</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/><sp/>-<sp/>Set<sp/>them<sp/>to<sp/>0<sp/>to<sp/>have<sp/>them<sp/>reported<sp/>as<sp/>0</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/><sp/>-<sp/>Set<sp/>them<sp/>to<sp/>other<sp/>positive<sp/>numbers<sp/>to<sp/>change<sp/>the<sp/>damage<sp/>values<sp/>as<sp/>you<sp/>see<sp/>fit.</highlight></codeline>
<codeline></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>Send<sp/>the<sp/>modfied<sp/>damages<sp/>to<sp/>nwnx</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>NWNX_Damage_SetDamageEventData(data);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">Hellball<sp/>script<sp/>example<sp/>using<sp/>DealDamage</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">```c</highlight></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;x2_i0_spells&quot;</highlight></codeline>
<codeline><highlight class="normal">#include<sp/>&quot;nwnx_damage&quot;</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal">void<sp/>main()</highlight></codeline>
<codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>int<sp/>nSpellDC<sp/>=<sp/>GetEpicSpellSaveDC(OBJECT_SELF);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>effect<sp/>eKnock<sp/>=<sp/>EffectKnockdown();</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>effect<sp/>eExplode<sp/>=<sp/>EffectVisualEffect(464);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>location<sp/>lTarget<sp/>=<sp/>GetSpellTargetLocation();</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ApplyEffectAtLocation(DURATION_TYPE_INSTANT,<sp/>eExplode,<sp/>lTarget);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>roll<sp/>damage<sp/>once</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>struct<sp/>NWNX_Damage_DamageData<sp/>damage,<sp/>half;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>damage.iAcid<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>d6(10);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>damage.iElectrical<sp/><sp/>=<sp/>d6(10);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>damage.iFire<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>d6(10);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>damage.iSonic<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>d6(10);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>half.iAcid<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>damage.iAcid<sp/>/<sp/>2;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>half.iElectrical<sp/><sp/><sp/><sp/>=<sp/>damage.iElectrical<sp/>/<sp/>2;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>half.iFire<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>damage.iFire<sp/>/<sp/>2;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>half.iSonic<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>damage.iSonic<sp/>/<sp/>2;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>//<sp/>apply<sp/>damage</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>object<sp/>oTarget<sp/>=<sp/>GetFirstObjectInShape(SHAPE_SPHERE,<sp/>20.0f,<sp/>lTarget,<sp/>TRUE,<sp/>OBJECT_TYPE_CREATURE);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>while<sp/>(GetIsObjectValid(oTarget))</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(spellsIsTarget(oTarget,<sp/>SPELL_TARGET_STANDARDHOSTILE,<sp/>OBJECT_SELF))</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>SignalEvent(oTarget,<sp/>EventSpellCastAt(OBJECT_SELF,<sp/>GetSpellId()));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>fDelay<sp/>=<sp/>GetDistanceBetweenLocations(lTarget,<sp/>GetLocation(oTarget))/20<sp/>+<sp/>0.5f;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>no<sp/>we<sp/>don&apos;t<sp/>care<sp/>about<sp/>evasion.<sp/>there<sp/>is<sp/>no<sp/>evasion<sp/>to<sp/>hellball</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(MySavingThrow(SAVING_THROW_REFLEX,oTarget,nSpellDC,SAVING_THROW_TYPE_SPELL,OBJECT_SELF,fDelay)<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DelayCommand(fDelay,<sp/>NWNX_Damage_DealDamage(half,<sp/>oTarget));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>else</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DelayCommand(fDelay,<sp/>NWNX_Damage_DealDamage(damage,<sp/>oTarget));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DelayCommand(fDelay<sp/>+<sp/>0.3f,<sp/>ApplyEffectToObject(DURATION_TYPE_INSTANT,<sp/>eKnock,<sp/>oTarget));</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>oTarget<sp/>=<sp/>GetNextObjectInShape(SHAPE_SPHERE,<sp/>20.0f,<sp/>lTarget,<sp/>TRUE,<sp/>OBJECT_TYPE_CREATURE);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal">```</highlight></codeline>
    </programlisting>
    <location file="Plugins/Damage/Documentation/README.md"/>
  </compounddef>
</doxygen>
